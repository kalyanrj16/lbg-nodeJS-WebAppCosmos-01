<!DOCTYPE html>
<html>
<head>
  <title>Mortgage Sample App</title>
  <!-- Add your CSS links here -->
</head>
<body>
  <h1>Welcome to LBG Hackathon!! </h1>
  <h2> Sample Node.js App deployed to App Services and accesses Cosmos DB NoSQL data </h2>
  <label for="database-dropdown">Select Database:</label>
  <select id="database-dropdown"></select>
  <button id="show-data-button">Show Data</button>
  <pre id="data-display"></pre>

  <script>
    fetch('/api/databases')
      .then(response => response.json())
      .then(databases => {
        const dropdown = document.getElementById('database-dropdown');
        databases.forEach(db => {
          const option = document.createElement('option');
          option.value = db;
          option.textContent = db;
          dropdown.appendChild(option);
        });
      });

    document.getElementById('show-data-button').addEventListener('click', () => {
      const selectedDb = document.getElementById('database-dropdown').value;
      fetch(`/api/mortgage?database=${selectedDb}`)
        .then(response => response.json())
        .then(data => {
          const dataDisplay = document.getElementById('data-display');
          dataDisplay.textContent = JSON.stringify(data, null, 2);
        });
    });
  </script>
</body>
</html>